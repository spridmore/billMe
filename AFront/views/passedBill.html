<div ng-cloak ng-controller="passedBillController" class="passedBody container-fluid">
  <div class="infinite col-xs-8">
    <h2 class="passedHeader">Most Recently Passed Legislation</h2>
    <h4 class="passedHeader">List updated daily. Topmost bill is the most recent to pass both houses.</h4>
    <div class="passedHeader">
      <input class="form-control" type="text" ng-model="subject">
      <button class="searchBillBtn btn btn-primary" ng-click="sendSubjectPassed()">Search Bills</button>
      <div style="color: red" class="billError" ng-show="billError">
        <p>Please enter a search query</p>
      </div>
    </div>
  </div>

  <!--passed bills returned w/o a search query-->
  <div class="clearer">
    <div class="cardHolder col-sm-8">
      <dl class="slideInUp billCard" ng-repeat="z in passed">
        <dt>Bill title:</dt>
        <dd>{{z.official_title}}</dd>
            <dt>Sponsoring Congress Person:</dt>
            <dd>{{z.sponsor.title}}. {{z.sponsor.first_name}} {{z.sponsor.last_name}}</dd>
        <span>  
          <button class="btn btn-default dropDownBtn" ng-click="showBillDetails = !showBillDetails">Bill Details</button>
          <button class="btn btn-default dropDownBtn" ng-click="showReading = !showReading">Continue Reading</button>
          <button class="btn btn-default dropDownBtn" ng-click="showComment = !showComment; showComments(z.bill_id);">Comments</button>
        </span>
            <div ng-show="showBillDetails">
              <hr class="divisor">
              <dt>Official Id:</dt>
              <dd>{{z.bill_id}}</dd>
              <dt>Date enacted:</dt>
              <dd>{{z.history.enacted_at}}</dd>
              <dt>Date introduced:</dt>
              <dd>{{z.introduced_on}}</dd>
            </div>
            <div ng-show="showReading">
              <hr class="divisor">
              <dt><a href="{{z.last_version.urls.html}}">Read</a> the bill in its entirety.</dt>
              <dt><a href="{{z.urls.govtrack}}">Dig</a> into the details.</dt>
            </div>
            <div class="comments" ng-show="showComment">
              <dl ng-repeat="comment in returnedComments">
                <dt>{{comment.author}} said:</dt>
                <dd>{{comment.body}}</dd>
              </dl>
              <textarea  class="form-control" placeholder="Floor's open" rows="3" cols="50" ng-model="$parent.billComment"></textarea>
              Name<input type="text" ng-model="$parent.userName">
              <button ng-click="submitComment(billComment, userName, z.bill_id);">Submit</button>
            </div>
      </dl>      
      
      <!--passed bills w/ search query-->
      <dl class="billCard" ng-repeat="z in subjectReturned">
        <dt>Bill title:</dt>
        <dd>{{z.official_title}}
          <dd>
            <dt>Sponsoring Congress Person:</dt>
            <dd>{{z.sponsor.title}}. {{z.sponsor.first_name}} {{z.sponsor.last_name}}</dd>
            <span>  
          <button class="btn btn-default dropDownBtn" ng-click="showDetails = !showDetails">Bill Details</button>
          <button class="btn btn-default dropDownBtn" ng-click="showLinks = !showLinks">Continue Reading</button>
          <button class="btn btn-default dropDownBtn" ng-click="showComment = !showComment; showComments($index)">Comments</button>          
        </span>
            <div ng-show="showDetails">
              <hr class="divisor">
              <dt>Official Id:</dt>
              <dd>{{z.bill_id}}</dd>
              <dt>Chamber:</dt>
              <dd>{{z.chamber}}</dd>
              <dt>Date enacted:</dt>
              <dd>{{z.history.enacted_at}}</dd>
              <dt>Date introduced:</dt>
              <dd>{{z.introduced_on}}</dd>
            </div>
            <div ng-show="showLinks">
              <hr class="divisor">
              <dt><a href="{{z.last_version.urls.html}}">Read</a> the bill in its entirety.</dt>
              <dt><a href="{{z.urls.govtrack}}">Dig</a> into the details.</dt>
            </div>
            <div class="comments" ng-show="showComment">
              <dl ng-repeat="comment in returnedComments">
                <dt>{{comment.author}} said:</dt>
                <dd>{{comment.body}}</dd>
              </dl>
              <textarea  class="form-control" placeholder="Floor's open" rows="3" cols="50" ng-model="$parent.billComment"></textarea>
              Name<input type="text" ng-model="$parent.userName">
              <button ng-click="submitComment(billComment, userName, $index)">Submit</button>
            </div>
      </dl>
    </div>
  </div>
</div>